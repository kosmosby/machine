/**
 * @package    AcyMailing for Joomla
 * @version    6.0.3
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

var task,formName;function submitAcymForm(e,t){task=e,formName=t;var a="acym-captcha";t&&(a=t+"-captcha");var r=document.querySelector("#"+a+'[class="g-recaptcha"][data-size="invisible"]');if(r&&"object"==typeof grecaptcha){var s=r.getAttribute("grcID");return s||(s=grecaptcha.render(a,{sitekey:r.getAttribute("data-sitekey"),callback:"acySubmitSubForm",size:"invisible","expired-callback":"resetRecaptcha"}),r.setAttribute("grcID",s)),grecaptcha.getResponse(s)?acySubmitSubForm():(grecaptcha.execute(s),!1)}return acySubmitSubForm()}function resetRecaptcha(){var e="acym-captcha";formName&&(e=formName+"-captcha");var t=document.querySelector("#"+e+'[class="g-recaptcha"][data-size="invisible"]');if(t){var a=t.getAttribute("grcID");grecaptcha.reset(a)}}function acySubmitSubForm(){var e=document[formName],t=acymModule.emailRegex;e.elements||(e=e[0].elements["user[email]"]&&e[0].elements["user[email]"].value&&t.test(e[0].elements["user[email]"].value)?e[0]:e[e.length-1]);var a,r,s,n,l,i=e.elements["user[email]"];if(i.value!=acymModule.EMAILCAPTION&&(i.value=i.value.replace(/ /g,"")),!i||i.value==acymModule.EMAILCAPTION||!t.test(i.value))return alert(acymModule.VALID_EMAIL),i.className=i.className+" invalid",!1;var u=document.querySelectorAll('[type="radio"][data-required]');if(u.length>0){for(a="",r=0,s=0;s<u.length;s++){if(n=JSON.parse(u[s].getAttribute("data-required")),""!==a&&a!=u[s].getAttribute("name")&&0==r)return n=JSON.parse(u[s-1].getAttribute("data-required")),alert(n.message),!1;""!==a&&a!=u[s].getAttribute("name")&&r>0&&(r=0),u[s].checked&&r++,a=u[s].getAttribute("name")}if(0==r)return alert(n.message),!1}var c=document.querySelectorAll('[type="checkbox"][data-required]');if(c.length>0){for(a="",r=0,s=0;s<c.length;s++){if(n=JSON.parse(c[s].getAttribute("data-required")),""!==a&&a!=c[s].getAttribute("name")&&0==r)return n=JSON.parse(c[s-1].getAttribute("data-required")),alert(n.message),!1;""!==a&&a!=c[s].getAttribute("name")&&r>0&&(r=0),c[s].checked&&r++,a=c[s].getAttribute("name")}if(0==r)return alert(n.message),!1}var o=document.querySelectorAll("[data-required]");if(o.length>0)for(s=0;s<o.length;s++){if(("text"===(n=JSON.parse(o[s].getAttribute("data-required"))).type||"textarea"===n.type||"single_dropdown"===n.type||"multiple_dropdown"===n.type||"phone"===n.type||"file"===n.type)&&""===o[s].value)return alert(n.message),!1;if("file"===n.type&&0===o[s].files.length)return alert(n.message),!1}var m=document.querySelectorAll("[data-authorized-content]");if(m.length>0)for(s=0;s<m.length;s++){var d=JSON.parse(m[s].getAttribute("data-authorized-content"));if(l="","number"===d[0]?l=/^[0-9]+$/:"letters"===d[0]?l=/^[a-zA-Z]+$/:"numbers_letters"===d[0]?l=/^[a-zA-Z0-9]+$/:"regex"===d[0]&&(l=new RegExp(d.regex)),""!=l&&!l.test(m[s].value))return alert(d.message),!1}if(e.elements.hiddenlists.value.length<1){var p=!1,g=e.elements["subscription[]"];if(g&&(void 0===g.value||0==g.value.length)){for(b=0;b<g.length;b++)g[b].checked&&(p=!0);if(!p)return alert(acymModule.NO_LIST_SELECTED),!1}}if("undefined"!=typeof acymModule&&void 0!==acymModule["excludeValues"+formName])for(var y in acymModule["excludeValues"+formName])acymModule["excludeValues"+formName].hasOwnProperty(y)&&e.elements["user["+y+"]"]&&e.elements["user["+y+"]"].value==acymModule["excludeValues"+formName][y]&&(e.elements["user["+y+"]"].value="");if("undefined"!=typeof ga&&"unsubscribe"!=task?ga("send","pageview","subscribe"):"undefined"!=typeof ga&&ga("send","pageview","unsubscribe"),taskField=e.task,taskField.value=task,!e.elements.ajax||!e.elements.ajax.value||"0"==e.elements.ajax.value)return e.submit(),!1;var f=document.getElementById(formName),v=new FormData(f);f.className+=" acym_module_loading",f.style.filter="alpha(opacity=50)",f.style.opacity="0.5";var h=new XMLHttpRequest;return h.open("POST",f.action),h.onload=function(){var e="Ajax Request Failure",t="error";if(200===h.status){var a=JSON.parse(h.responseText);e=a.message,t=a.type}acymDisplayAjaxResponse(decodeURIComponent(e),t,formName)},h.send(v),!1}function acymDisplayAjaxResponse(e,t,a,r=!0){responseContainer=document.createElement("div");var s=document.getElementById("acym_fulldiv_"+a);s.firstChild?s.insertBefore(responseContainer,s.firstChild):s.appendChild(responseContainer),oldContainerHeight="0px",responseContainer.className="responseContainer";var n=document.getElementById(a),l=n.className,i="acym_module_loading",u=l.replace(" "+i,"",l);u==l&&(u=l.replace(i+" ","",l)),u==l&&(u=l.replace(i,"",l)),n.className=u,responseContainer.innerHTML=e,"success"==t?responseContainer.className+=" acym_module_success":(responseContainer.className+=" acym_module_error",n.style.opacity="1"),newContainerHeight=responseContainer.style.height,(r||"success"==t)&&(n.style.display="none"),responseContainer.className+=" message_"+a,responseContainer.className+=" slide_open"}